defaultNamespace: traefik
helm:
  version: 39.0.0
  chart: traefik
  repo: https://traefik.github.io/charts
  releaseName: traefik
  values:
    providers:
      kubernetesGateway:
        enabled: true
    gateway:
      enabled: true
    listeners:
      - name: web
        port: 8000
        hostname: ${ if hasKey .ClusterAnnotations "hosted-domain" }*.${ .ClusterName }.${ get .ClusterAnnotations "hosted-domain" }${ end }
        namespacePolicy:
          from: All
      - name: websecure
        hostname: ${ if hasKey .ClusterAnnotations "hosted-domain" }*.${ .ClusterName }.${ get .ClusterAnnotations "hosted-domain" }${ end }
        port: 8443
        protocol: HTTPS
        namespacePolicy:
          from: All
        certificateRefs:
          name: wildcard-tls
          kind: Secret
labels:
  app: traefik
overrideTargets:
  - clusterSelector:
      matchLabels:
        needs-traefik: true