defaultNamespace: longhorn-system
helm:
  chart: oci://dp.apps.rancher.io/charts/suse-storage
  releaseName: suse-storage
  version: "1.10.2"
  values:
    global:
      imagePullSecrets: ["application-collection"]
    ingress:
      enabled: ${ if hasKey .ClusterAnnotations "hosted-domain" }true${ else }false${ end}
      host: ${ if hasKey .ClusterAnnotations "hosted-domain" }storage.${ .ClusterName }.${ get .ClusterAnnotations "hosted-domain" }${ end}
      ingressClassName: traefik
      tls: true
      tlsSecret: wildcard-tls
      # annotations:
      #   cert-manager.io/cluster-issuer: letsencrypt-prod
    persistence:
      migratable: true
      defaultClassReplicaCount: 3
    longhornUI:
      replicas: 1

overrideTargets:
  - clusterSelector:
      matchLabels:
        needs-storage: "true"
labels:
  provides: longhorn
